"use strict";var burger=document.querySelector("#burger"),burgerMenu=document.querySelector(".js_burger_menu");burger.onclick=function(){burger.classList.toggle("burger_active"),burgerMenu.classList.toggle("nav_list--active")};var gallery=[{preview:"images/our_works/1.png",original:"images/our_works/big_img/1.png",description:"work1"},{preview:"images/our_works/2.png",original:"images/our_works/big_img/2.png",description:"work2"},{preview:"images/our_works/3.png",original:"images/our_works/big_img/3.png",description:"work3"},{preview:"images/our_works/4.png",original:"images/our_works/big_img/4.png",description:"work4"},{preview:"images/our_works/5.png",original:"images/our_works/big_img/5.png",description:"work5"},{preview:"images/our_works/6.png",original:"images/our_works/big_img/6.png",description:"work6"},{preview:"images/our_works/7.png",original:"images/our_works/big_img/7.png",description:"work7"},{preview:"images/our_works/8.png",original:"images/our_works/big_img/8.png",description:"work8"}];function createGallery(e,t,n,o,r,a){var i=document.querySelector(e),c=document.querySelector(t),l=document.querySelector(n),s=document.querySelector(o),d=document.querySelector(r),u=document.querySelector(a);function g(e){e.target!==e.currentTarget&&"Escape"!==e.code||(c.classList.remove("is-open"),c.classList.remove("faded"),document.body.style.overflow="visible",l.alt="",l.src="",window.removeEventListener("keydown",g),window.removeEventListener("keydown",p))}function p(e){var n;if(gallery.forEach(function(e,t){e.description==l.alt&&(n=t)}),"ArrowRight"===e.code||e.target===d){if(n>=gallery.length-1)return;l.alt=gallery[n+1].description,l.src=gallery[n+1].original}if("ArrowLeft"===e.code||e.target===u){if(0===n)return;l.alt=gallery[n-1].description,l.src=gallery[n-1].original}}i.insertAdjacentHTML("beforeend",gallery.map(function(e){return n=(t=e).preview,o=t.original,r=t.description,'\n    <li class="gallery__item js-gallery__item">\n  <a\n    class="gallery__link"\n    href='.concat(o,'\n  >\n    <img\n      class="gallery__image"\n      src=').concat(n,"\n      data-source=").concat(o,"\n      alt=").concat(r,"\n    />\n  </a>\n</li>\n    ");var t,n,o,r}).join("")),i.addEventListener("click",function(e){{if(e.preventDefault(),!e.target.matches("img"))return;c.classList.add("is-open"),c.classList.add("faded"),document.body.style.overflow="hidden",l.alt=e.target.alt,l.src=e.target.dataset.source,window.addEventListener("keydown",g),c.addEventListener("click",g),s.addEventListener("click",g),window.addEventListener("keydown",p),d.addEventListener("click",p),u.addEventListener("click",p)}})}function form(){var e=document.querySelectorAll("form"),i=document.querySelectorAll("input"),c="Загрузка...",l="Спасибо! Скоро мы с вами свяжемся",s="Что-то пошло не так...";e.forEach(function(a){a.addEventListener("submit",function(e){e.preventDefault();var t=document.createElement("div");t.classList.add("status"),a.appendChild(t),document.querySelector(".status").textContent=c;var n=new FormData(a);if(a.classList.contains("popup_form--calc"))for(var o in modalDate)n.append(o,modalDate[o]);var r={};n.forEach(function(e,t){r[t]=e}),fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:r}).then(function(e){t.textContent=l}).catch(function(){t.textContent=s}).finally(function(){console.log(r),i.forEach(function(e){e.value=""}),setTimeout(function(){t.remove()},5e3)})})})}createGallery(".js-gallery",".js-works_modal",".js-modal_img",".modal_button-close",".modal_button-right",".modal_button-left"),form();var modalDate={};function getModalDate(){var e=document.querySelector(".popup_tabs--menu"),t=document.querySelector("#width"),n=document.querySelector("#height"),o=document.querySelector("#view_type"),r=document.querySelector(".radio-box");function a(e,t,n){t.addEventListener(e,function(e){"IMG"==e.target.tagName?modalDate[n]=e.target.alt:modalDate[n]=e.target.value,console.log(modalDate)})}a("input",t,"width"),a("input",n,"height"),a("click",e,"form"),a("change",o,"view"),a("change",r,"profile")}function bindModal(e,t,n){var o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=document.querySelectorAll(e),a=document.querySelector(t),i=document.querySelector(n),c=document.querySelectorAll(".popup");function l(e){document.body.style.overflow="",e.classList.remove("is-open"),e.classList.remove("faded")}r.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),c.forEach(function(e){l(e)}),document.body.style.overflow="hidden",a.classList.add("is-open"),a.classList.remove("fadeOut"),a.classList.add("faded")})}),i.addEventListener("click",function(e){a.classList.add("fadeOut"),l(a)}),a.addEventListener("click",function(e){e.target===e.currentTarget&&o&&(a.classList.add("fadeOut"),l(a))})}function slides(e,t,n,o){var r,a=document.querySelector(o),i=document.querySelector(n),c=document.querySelectorAll(e),l=document.querySelector(t),s=1;a.addEventListener("click",function(){event.preventDefault(),s==c.length?(s=1,l.style.transform="translateX(-0%)"):(r=c[s].clientWidth,l.style.transform="translateX(-"+r*s+"px)",s+=1)}),i.addEventListener("click",function(){event.preventDefault(),(s-=1)<=0?(r=c[s].clientWidth,s=c.length):r=c[s].clientWidth,l.style.transform="translateX(-"+(r*s-r)+"px)"})}function tab(e,t,n,o){var r=document.querySelector(e),a=document.querySelectorAll(t),i=document.querySelectorAll(n);function c(){i.forEach(function(e){e.classList.add("hide"),e.classList.remove("faded")}),a.forEach(function(e){e.classList.remove(o.replace(/\./,""))})}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;i[e].classList.remove("hide"),i[e].classList.add("faded"),a[e].classList.add(o.replace(/\./,""))}c(),l(),r.addEventListener("click",function(n){{if(n.preventDefault(),!n.target.classList.contains(t.replace(/\./,""))&&!n.target.parentNode.classList.contains(t.replace(/\./,"")))return;a.forEach(function(e,t){n.target!=e&&n.target.parentNode!=e||(c(),l(t))})}})}getModalDate(),bindModal(".js_contactUs",".js_popup-call",".js_popup-call--close"),bindModal(".js_callEngineer",".js_popup-engineer",".js_popup-engineer_close"),bindModal(".glazing_price_btn",".js-popup_calc",".js-popup_calc-close"),bindModal(".js-popup_calc-next",".js-popup_calc--second",".js-popup_calc-close--second",!1),bindModal(".js-popup_calc-next--second",".js-popup_calc--end",".js-popup_calc-close--end",!1),slides(".glazing_item",".glazing_list","#glazing_btn-prev","#glazing_btn-next"),slides(".decoration_item",".decoration_list","#decoration_btn-prev","#decoration_btn-next"),tab(".glazing_tabs--menu",".glazing_tabs--item",".glazing_tabs--content",".active"),tab(".decoration_tabs--menu",".decoration_tabs--item",".decoration_tabs--content",".active"),tab(".popup_tabs--menu",".popup_tabs--item",".popup_tabs--content",".active");